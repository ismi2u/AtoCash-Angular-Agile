<form nz-form [formGroup]="form" (ngSubmit)="submitForm()">
	
	<nz-form-item>
		<nz-form-label [nzSpan]="7" nzRequired nzFor="expenseCategoryId">{{
		'form.expenseType.expenseCategory' | translate
		}}</nz-form-label>

		<nz-form-control
		[nzSpan]="15"
		[nzErrorTip]="'validation.required' | translate"
		>
		<nz-select
			nzShowSearch
			nzAllowClear
			id="expenseCategoryId"
			formControlName="expenseCategoryId"
			[nzPlaceHolder]="'form.expenseType.expenseCategory' | translate"
			(ngModelChange)="selectExpenseType($event);"
		>
			<nz-option
			*ngFor="let option of expenseCategoriesList"
			[nzValue]="option.id"
			[nzLabel]="option.expenseCategoryName"
			></nz-option>
		</nz-select>
		</nz-form-control>
	</nz-form-item>

	<nz-form-item>
		<nz-form-label [nzSpan]="7" nzRequired nzFor="expenseTypeId">{{
			'form.expenseReimburse.expense' | translate
		}}</nz-form-label>

		<nz-form-control
			[nzSpan]="15"
			[nzErrorTip]="'validation.required' | translate"
		>
			<nz-select
				nzShowSearch
				nzAllowClear
				id="expenseTypeId"
				formControlName="expenseTypeId"
				[nzPlaceHolder]="'form.expenseReimburse.expense' | translate"
				[(ngModel)]="selectedValue"
			>
				<nz-option
					*ngFor="let option of expenseType"
					[nzValue]="option.id"
					[nzLabel]="option.expenseTypeName"
				></nz-option>
			</nz-select>
		</nz-form-control>
	</nz-form-item>

	<nz-form-item>
		<nz-form-label [nzSpan]="7" nzRequired nzFor="invoiceNo">{{
			'form.expenseReimburse.invoiceNo' | translate
		}}</nz-form-label>

		<nz-form-control
			[nzSpan]="15"
			[nzErrorTip]="'validation.required' | translate"
		>
			<input
				formControlName="invoiceNo"
				type="text"
				nz-input
				[placeholder]="'form.expenseReimburse.invoiceNo' | translate"
				id="invoiceNo"
			/>
		</nz-form-control>
	</nz-form-item>
	
	<nz-form-item>
		<nz-form-label [nzSpan]="7" nzRequired nzFor="invoiceDate">{{
			'form.expenseReimburse.invoiceDate' | translate
		}}</nz-form-label>

		<nz-form-control
			[nzSpan]="15"
			[nzErrorTip]="'validation.required' | translate"
		>
			<nz-date-picker
				[nzDisabledDate]="disabledDate"
				id="invoiceDate"
				formControlName="invoiceDate"
				[nzPlaceHolder]="'form.expenseReimburse.invoiceDate' | translate"
			></nz-date-picker>
		</nz-form-control>
	</nz-form-item>

	<nz-form-item>
		<nz-form-label [nzSpan]="7" nzFor="NoOfDaysDate">{{
			'form.expenseReimburse.NoOfDays' | translate
		}}</nz-form-label>

		<nz-form-control
			[nzSpan]="20"
			[nzErrorTip]="'validation.required' | translate"
		>
			<nz-range-picker
				[nzDisabledDate]="disabledDate"
				id="NoOfDaysDate"
				formControlName="NoOfDaysDate"
				[nzPlaceHolder]="['form.expenseReimburse.StartDate'| translate,'form.expenseReimburse.EndDate'| translate]"
				(nzOnCalendarChange)="onCalendarChange($event)" [nzSize]="['large']"
			></nz-range-picker>
		</nz-form-control>
	</nz-form-item>
   
	<nz-form-item>
		<nz-form-label [nzSpan]="7">&nbsp;</nz-form-label>

		<nz-form-control [nzSpan]="15">
			<input
				formControlName="NoOfDays"
				type="text"
				nz-input
				[placeholder]="'form.expenseReimburse.NoOfDays' | translate"
				id="NoOfDays" [disabled]="true" />
		</nz-form-control>
	</nz-form-item>

	<nz-form-item>
		<nz-form-label nzRequired [nzSpan]="7" nzFor="location">{{
			'form.expenseReimburse.location' | translate
		}}</nz-form-label>

		<nz-form-control
			[nzSpan]="15"
			[nzErrorTip]="'validation.required' | translate"
		>
			<input
				formControlName="location"
				type="text"
				nz-input
				[placeholder]="'form.expenseReimburse.location' | translate"
				id="location"
			/>
		</nz-form-control>
	</nz-form-item>
	
	<nz-form-item>
		<nz-form-label [nzSpan]="7" nzFor="vendorId">{{
		'form.expenseReimburse.vendor' | translate
		}}</nz-form-label>

		<nz-form-control
		[nzSpan]="15"
		[nzErrorTip]="'validation.required' | translate"
		>
		<nz-select
			nzShowSearch
			nzAllowClear
			id="vendorId"
			formControlName="vendorId"
			[nzPlaceHolder]="'form.expenseReimburse.vendor' | translate" (ngModelChange)="selectedVendor($event)"
		>
			<nz-option
			*ngFor="let option of vendors"
			[nzValue]="option.id"
			[nzLabel]="option.vendorName"
			></nz-option>
		</nz-select>
		</nz-form-control>
	</nz-form-item>

	<nz-form-item *ngIf="form.controls['vendorId'].value=='0'">
		<nz-form-label [nzSpan]="7" nzFor="additionalVendor">{{
			'form.expenseReimburse.additionalVendor' | translate
		}}</nz-form-label>
		<nz-form-control
			[nzSpan]="15"
			[nzErrorTip]="'validation.required' | translate"
		>
			<input
				formControlName="additionalVendor"
				type="text"
				nz-input
				[placeholder]="'form.expenseReimburse.additionalVendor' | translate"
				id="additionalVendor"
			/>
		</nz-form-control>
	</nz-form-item>

	
	<nz-form-item>
		<nz-form-label [nzSpan]="7" nzRequired nzFor="expenseReimbClaimAmount">{{
			'form.expenseReimburse.expenseReimburseAmount' | translate
		}}</nz-form-label>
		<nz-form-control
			[nzSpan]="15"
			[nzErrorTip]="'validation.required' | translate"
		>
			<input
				formControlName="expenseReimbClaimAmount"
				type="number"
				nz-input
				[placeholder]="
					'form.expenseReimburse.expenseReimburseAmount' | translate
				"
				id="expenseReimbClaimAmount"  (blur)="calcTolClaimAmt()" (keyup)="calcTolClaimAmt()"
			/>
		</nz-form-control>
	</nz-form-item>
	

	
	
	<nz-form-item>
		<nz-form-label [nzSpan]="7" nzRequired nzFor="isVAT" >{{
		  "form.expenseReimburse.isVAT" | translate
		}}</nz-form-label>		
		<nz-switch nzSize="small"  formControlName="isVAT" id="isVAT" (ngModelChange)="getVATRate($event);"></nz-switch>		 
	</nz-form-item>

	<nz-form-item>
		<nz-form-label [nzSpan]="7" nzFor="tax">{{
			'form.expenseReimburse.tax' | translate
		}}</nz-form-label>

		<nz-form-control
			[nzSpan]="15"
			[nzErrorTip]="'validation.required' | translate"
		>
			<input formControlName="tax" 
			id="tax" 
			type="text" 
			nz-input 
			[placeholder]="'form.expenseReimburse.tax' | translate" 
			id="tax" [disabled]="true"/>
		</nz-form-control>
	</nz-form-item>

	<nz-form-item>
		<nz-form-label nzRequired [nzSpan]="7" nzFor="taxAmount">{{
			'form.expenseReimburse.taxAmount' | translate
		}}</nz-form-label>

		<nz-form-control
			[nzSpan]="15"
			[nzErrorTip]="'validation.required' | translate"
		>
			<input
				formControlName="taxAmount"
				type="text"
				nz-input
				[placeholder]="'form.expenseReimburse.taxAmount' | translate"
				id="vendor"
				[disabled]="true"  
			/>
		</nz-form-control>
	</nz-form-item>

	<nz-form-item>
		<nz-form-label [nzSpan]="7" nzFor="totalClaimAmount">
			{{
			'form.expenseReimburse.totalClaimAmount' | translate
			}}
			
		</nz-form-label>

		<nz-form-control
		[nzSpan]="15">
			<b>{{totalClaimAmt}}</b>
			&nbsp;<span *ngIf="withVAT==true">{{'form.expenseReimburse.withVAT' | translate }}</span>
		</nz-form-control>

	</nz-form-item>
	
	<nz-form-item>
		<nz-form-label nzRequired [nzSpan]="7" nzFor="taxNo">{{
			'form.expenseReimburse.taxNo' | translate
		}}</nz-form-label>

		<nz-form-control
			[nzSpan]="15"
			[nzErrorTip]="'validation.required' | translate"
		>
			<input
				formControlName="taxNo"
				type="text"
				nz-input
				[placeholder]="'form.expenseReimburse.taxNo' | translate"
				id="taxNo"
			/>
		</nz-form-control>
	</nz-form-item>


	
	<nz-form-item>
		<nz-form-label nzRequired [nzSpan]="7" nzFor="description">{{
			'form.expenseReimburse.description' | translate
		}}</nz-form-label>

		<nz-form-control
			[nzSpan]="15"
			[nzErrorTip]="'validation.required' | translate"
		>
			<textarea
				formControlName="description"
				[placeholder]="'form.expenseReimburse.description' | translate"
				nz-input
				[nzAutosize]="{ minRows: 2, maxRows: 6 }"
			></textarea>
		</nz-form-control>
	</nz-form-item>

	<nz-form-item>
		<nz-form-label [nzSpan]="7" nzRequired nzFor="task">{{
			'form.expenseReimburse.documents' | translate
		}}</nz-form-label>
		<nz-form-control
			[nzSpan]="15"
			[nzErrorTip]="'validation.required' | translate"
		>
			<nz-upload
				nzType="drag"
				[nzMultiple]="true"
				[nzBeforeUpload]="beforeUpload"
				[(nzFileList)]="fileList"
			>
				<p class="ant-upload-drag-icon">
					<i nz-icon nzType="inbox"></i>
				</p>
				<p class="ant-upload-text">Click or drag file to this area to upload</p>
				<p class="ant-upload-hint">Atleast one Document has to be submitted!</p>
			</nz-upload>
		</nz-form-control>
	</nz-form-item>

	<nz-form-item>
		<nz-form-control class="action-control">
			<button
				nz-button
				nzType="primary"
				[disabled]="
					!form.valid ||
					fileList.length === 0 ||
					!form.controls['expenseReimbClaimAmount'].value
				"
			>
				{{ getButtonLabel() }}
			</button>
		</nz-form-control>
	</nz-form-item>
</form>
<ng-template #action>
	<button nz-button routerLink="/expense-reimburse" nzType="primary">
		<i nz-icon nzType="arrow-left"></i>
		{{ 'button.back' | translate }}
	</button>
</ng-template>
